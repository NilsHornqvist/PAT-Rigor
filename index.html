<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PATS-Rigor</title>
  <style>
    body {
      font-family: Times New Roman, sans-serif;
      background: #000000;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }
    .container {
      background: #fff;
      padding: 3rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      max-width: 1000px;
      max-height: 1000px;
      text-align: center;
    }
    button {
      background: #007acc;
      color: #fff;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 1rem;
    }
    button:hover {
      background: #005b99;
    }
    .hidden {
      display: none;
    }
    .option {
    display: block;
    margin: 0.5rem 0;
    padding: 0.5rem 0.5rem 0.5rem 2rem; /* leave space for circle */
    border: 1px solid #ccc;
    border-radius: 6px;
    cursor: pointer;
    position: relative;
  }

  .option::before {
    content: '';
    position: absolute;
    left: 0.5rem;
    top: 50%;
    transform: translateY(-50%);
    width: 16px;
    height: 16px;
    border: 2px solid #555;
    border-radius: 50%;
    background: transparent;
  }

  .option.selected::before {
    background: green;
    border-color: green;
  }

  .option.selected {
    background: #cccccc;
    }
  </style>
</head>
<body>

<div class="container" id="welcome">
  <h1>PATS-R Assessment</h1>
  <h2>Psychedelic-Assisted Therapy Specific Rigor Assessment (PATS-R)</h2>
  <p>PATS-R aims to provide further insight into a study’s rigor and reporting practices, unique to a Psychedelic-Assisted Therapy trial.</p>
  <p>PATS-R assesses rigor and reporting practices across 5 domains (Blinding, Fidelity, Outcome, Set and Setting, and Preparation and Integration).</p>
  <p>Use one study per assessment and select the answer that matches the study you are assessing.</p>
  <p>You will be asked 7 questions about the study. For each question, your answer is scored from 0 to 2 (with a lower score indicating lower rigor).</p>
  <p>After all questions are answered, both a total and a per-domain score will be given. Anotate both the total rigor assessment and the per-domain assessment.</p>
  <p>Link to the tool: https://nilshornqvist.github.io/PAT-Rigor/ </p>
  <p>Cite the tool: "Hörnqvist, N., (2025), PATS-R: A tool for assessing rigor in psychedelic-assisted therapy trials</p>
  <button onclick="showWelcome2()">Continue to assessment</button>
</div>

<div class="container hidden" id="welcome2">
  <h1>PATS-R Assessment</h1>
  <h2>Psychedelic-Assisted Therapy Specific Rigor Assessment (PATS-R)</h2>
  <p><b>Before starting your assessment, please note the following:</b></p>
  <p>- PATS-R is <b>not</b> designed to replace other, more widely used, tools for assessing Risk of Bias, but serves as a complementary assessment.</p>
  <p>- PATS-R is intended for research purposes only.</p>
  <p>- PATS-R is only intended for Randomized Control Trials using Psychedelic-Assisted Therapy.</p>
  <p><b>- Your score will not be saved.</b></p>
  <button onclick="startAssessment()">Start assessment</button>
</div>

<div class="container hidden" id="question1">
  <h1 id="domain">Q1/7 Domain: Blinding</h1>
  <h2>Were more rigorous attempts made to blind participants in the control group?</h2>
  <p><b>Blinding the control groups is a problem for psychedelic trials; thus, more rigorous trials have to rely on novel blinding techniques.</b>.</p>
  <p>Select the option that best matches the study you are assessing.</p>
  <div class="option" data-score="0" onclick="selectOption(this)">Inactive placebo or no active ingredient was used</div>
  <div class="option" data-score="1" onclick="selectOption(this)">Low dose of the same psychedelic was used</div>
  <div class="option" data-score="2" onclick="selectOption(this)">Another psychoactive compound (not a psychedelic) was used</div>
  <div class="option" data-score="1" onclick="selectOption(this)">Not Reported</div>
  <button class="confirm-btn" onclick="confirmAnswer(1)">Confirm Answer</button>
</div>

<div class="container hidden" id="question2">
  <h1 id="domain">Q2/7 Domain: Blinding</h1>
  <h2>Does the study investigate blinding success?</h2>
  <p><b>Blinding success means the percentage of participants who guessed their dosing group incorrectly.</b>.</p>
  <p><b>Blinding success for therapists should <u>not</u> be considered here, but is instead  assessed with question 3.</b>.</p>
  <p>Select the option that best matches the study you are assessing.</p>
  <div class="option" data-score="0" onclick="selectOption(this)">No form of blinding success was assessed</div>
  <div class="option" data-score="1" onclick="selectOption(this)">Blinding was assessed but was less than 10%</div>
  <div class="option" data-score="1" onclick="selectOption(this)">Blinding success was assessed, but it was less than 50%</div>
  <div class="option" data-score="2" onclick="selectOption(this)">Blinding success was assessed, and it was 50% or more</div>
  <button class="confirm-btn" onclick="confirmAnswer(2)">Confirm Answer</button>
</div>

<div class="container hidden" id="question3">
  <h1 id="domain">Q3/7 Domain: Therapist Fidelity</h1>
  <h2>Was therapist fidelity investigated?</h2>
  <p><b>Therapist fidelity is a measure of how closely each therapy session adhered to its predetermined protocol.</b></p>
  <p>Select the option that best matches the study you are assessing.</p>
  <div class="option" data-score="0" onclick="selectOption(this)">Therapist’s fidelity was not assessed</div>
  <div class="option" data-score="1" onclick="selectOption(this)">Therapist’s fidelity was used but not directly reported</div>
  <div class="option" data-score="1" onclick="selectOption(this)">Therapist’s fidelity was used but <b>not</b> assessed by independent assessors</div>
  <div class="option" data-score="2" onclick="selectOption(this)">Therapist's fidelity to the intended protocol was used, directly reported, and examined by independent assessors.</div>
  <button class="confirm-btn" onclick="confirmAnswer(3)">Confirm Answer</button>
</div>

<div class="container hidden" id="question4">
  <h1 id="domain">Q4/7 Domain: Outcome</h1>
  <h2>Was the scale used to assess the primary outcome appropriate?</h2>
  <p><b>The scales used should be scientifically rigorous, accurate, reliable, and consistent across time and participants.</b></p>
  <p>Select the option that best matches the study you are assessing.</p>
  <div class="option" data-score="0" onclick="selectOption(this)">The scale shows low sensitivity, is not consistent, is not fully validated, or is not comprehensive</div>
  <div class="option" data-score="0" onclick="selectOption(this)">No scales were used to measure absolute scores of the disorder</div>
  <div class="option" data-score="1" onclick="selectOption(this)">The scale is validated but relies on self-reporting <b>and</b> is moderately sensitive</div>
  <div class="option" data-score="2" onclick="selectOption(this)">The scale is comprehensive, validated, shows high sensitivity, and is clinician-administered</div>
  <div class="option" data-score="2" onclick="selectOption(this)">The scale is comprehensive, validated, shows high sensitivity, but is <strong>not</strong> clinician-administered</div>
  <button class="confirm-btn" onclick="confirmAnswer(4)">Confirm Answer</button>
</div>

<div class="container hidden" id="question5">
  <h1 id="domain">Q5/7 Domain: Set and Setting</h1>
  <h2>Were the experimental session-specific settings described and standardized?</h2>
  <p><b>Session-specific items include music, eyeshades, how the room was organized, etc.</b></p>
  <p>Select the option that best matches the study you are assessing.</p>
  <div class="option" data-score="0" onclick="selectOption(this)">Information about the set and settings is unavailable and was not standardized</div>
  <div class="option" data-score="1" onclick="selectOption(this)">Session-specific settings are reported but not standardized</div>
  <div class="option" data-score="1" onclick="selectOption(this)">Session-specific settings are standardized but not reported</div>
  <div class="option" data-score="2" onclick="selectOption(this)">Set and setting specifics were standardized</div>
  <button class="confirm-btn" onclick="confirmAnswer(5)">Confirm Answer</button>
</div>

<div class="container hidden" id="question6">
  <h1 id="domain">Q6/7 Domain: Preparation and Integration</h1>
  <h2>Were proper preparation and integration sessions administered throughout the study?</h2>
  <p><b>Preparatory sessions are the sessions before the first experimental session.</b>.</p>
  <p><b>Integrative sessions are the sessions following each experimental session.</b>.</p>
  <p>Select the option that best matches the study you are assessing.</p>
  <div class="option" data-score="0" onclick="selectOption(this)">No preparatory or integrative sessions were administered, or these sessions were not mandatory</div>
  <div class="option" data-score="1" onclick="selectOption(this)">1 or 2 preparatory sessions were administered before the first dosing, and one or two integrative sessions per experimental session were administered</div>
  <div class="option" data-score="2" onclick="selectOption(this)">≥3 preparatory / ≥3 integrative sessions per experimental session were administered</div>
  <button class="confirm-btn" onclick="confirmAnswer(6)">Confirm Answer</button>
</div>

<div class="container hidden" id="question7">
  <h1 id="domain">Q7/7 Domain: Preparation and Integration</h1>
  <h2>Were the preparatory and integrative sessions structured and standardized?</h2>
  <p><b>Preparatory sessions are the sessions before the first experimental session.</b>.</p>
  <p><b>Integrative sessions are the sessions following each experimental session.</b>.</p>
  <p>Select the option that best matches the study you are assessing.</p>
  <div class="option" data-score="0" onclick="selectOption(this)">Neither of the sessions was standardized or structured</div>
  <div class="option" data-score="0" onclick="selectOption(this)">Preparatory sessions were standardized, but the integrative sessions differed between the dosing groups</div>
  <div class="option" data-score="1" onclick="selectOption(this)">Preparatory sessions were not standardized or structured, but integrative sessions were structured and standardized</div>
  <div class="option" data-score="2" onclick="selectOption(this)">Both were structured and standardized and did not differ between dosing groups</div>
  <div class="option" data-score="1" onclick="selectOption(this)">Standardisation and structure is not reported</div>
  <button class="confirm-btn" onclick="confirmAnswer(7)">Confirm Answer</button>
</div>

<div class="container hidden" id="results">
  <h1>Your PATS-R assessment is completed</h1>
  <h2 id="finalAssessment"></h2>
  <div id="domainResults"></div>
  <p id="scoreText"></p>
  <p>Interpretation of score:</p>
  <ul style="text-align:left">
    <li>0–4 = <b>Low rigor</b></li>
    <li>5–9 = <b>Moderate rigor</b></li>
    <li>10–14 = <b>High rigor</b></li>
  </ul>
</div>

<script>
function showWelcome2() {
  document.getElementById("welcome").classList.add("hidden");
  document.getElementById("welcome2").classList.remove("hidden");
}

let totalScore = 0;
let currentQuestion = 1;
const totalQuestions = 7;

let selectedScore = null;

let domainScores = {
  "Domain 1 (Blinding)": 0,
  "Domain 2 (Therapist Fidelity)": 0,
  "Domain 3 (Outcome)": 0,
  "Domain 4 (Set and Setting)": 0,
  "Domain 5 (Preparation and Integration)": 0
};

const questionDomains = {
  1: "Domain 1 (Blinding)",
  2: "Domain 1 (Blinding)",
  3: "Domain 2 (Therapist Fidelity)",
  4: "Domain 3 (Outcome)",
  5: "Domain 4 (Set and Setting)",
  6: "Domain 5 (Preparation and Integration)",
  7: "Domain 5 (Preparation and Integration)"
};

function startAssessment() {
  document.getElementById("welcome2").classList.add("hidden");
  document.getElementById("question1").classList.remove("hidden");
}

function selectOption(elem) {
  document.querySelectorAll('#question' + currentQuestion + ' .option').forEach(o => o.classList.remove('selected'));
  elem.classList.add('selected');
  selectedScore = parseInt(elem.getAttribute('data-score'));
}

function confirmAnswer(questionNumber) {
  if (selectedScore === null) {
    alert("Please select an answer before confirming.");
    return;
  }
  answerQuestion(selectedScore);
  selectedScore = null;
}

function answerQuestion(score) {
  totalScore += score;

  const domain = questionDomains[currentQuestion];
  if(domain) domainScores[domain] += score;

  const currentQDiv = document.getElementById("question" + currentQuestion);
  if(currentQDiv) currentQDiv.classList.add("hidden");

  currentQuestion++;

  if(currentQuestion <= totalQuestions) {
    const nextQDiv = document.getElementById("question" + currentQuestion);
    if(nextQDiv) nextQDiv.classList.remove("hidden");
  } else {
    const resultsDiv = document.getElementById("results");
    if(resultsDiv) resultsDiv.classList.remove("hidden");

    const domainResultsDiv = document.getElementById("domainResults");
    if(domainResultsDiv) {
      domainResultsDiv.innerHTML = "";
      for(const [domainName, score] of Object.entries(domainScores)) {
        let risk = "";
        if(domainName === "Domain 1 (Blinding)" || domainName === "Domain 5 (Preparation and Integration)") {
          if(score <= 1) risk = "<b>Low rigor</b>";
          else if(score <= 3) risk = "<b>Moderate rigor</b>";
          else risk = "<b>High rigor</b>";
        } else {
          if(score === 0) risk = "<b>Low rigor</b>";
          else if(score === 1) risk = "<b>Moderate rigor</b>";
          else risk = "<b>High rigor</b>";
        }
        const p = document.createElement("p");
        p.innerHTML = `${domainName}: score: ${score} = ${risk}`;
        domainResultsDiv.appendChild(p);
      }
    }

    document.getElementById("scoreText").innerHTML = "Total score: <b>" + totalScore + "</b>";

    let assessmentText = "";
    if(totalScore <= 4){
      assessmentText = "Your study has a <b>low rigor</b>.";
    } else if(totalScore <= 9){
      assessmentText = "Your study has <b>moderate rigor</b>.";
    } else {
      assessmentText = "Your study has a <b>high rigor</b>.";
    }

    document.getElementById("finalAssessment").innerHTML = assessmentText;
  }
}
</script>
</body>
</html>
